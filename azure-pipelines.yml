# strategy:
#   matrix:
#     linux:
#       imageName: 'ubuntu-18.04.2'
#     mac:
#       imageName: 'macos-10.15'
#     windows:
#       imageName: 'windows-latest'
#       # imageName: 'vs2017-win2016'
#
# pool:
#   vmImage: $(imageName)

# Recommended host agent for .NET Core, see https://docs.microsoft.com/es-es/azure/devops/pipelines/agents/hosted?view=azure-devops
pool:
  vmImage: 'windows-2019'

trigger:
- master
- configure-azure-pipelines

steps:

# - task: Bash@0
#   inputs:
#     targetType: 'filePath'
#     filePath: ci/build.sh

- bash: |
    chmod 777 ./ci/build.sh
    chmod 777 ./ci/test.sh

- script:   |
    chmod 777 ./ci/build.sh
    chmod 777 ./ci/test.sh

- script:
    (cd ci; ./build.sh)

- script:
    (cd ci; ./test.sh)

- task: PublishTestResults@2
  inputs:
    testRunner: VSTest
    testResultsFiles: '**/*.trx'
